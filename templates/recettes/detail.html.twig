{% extends 'base.html.twig' %}
{% block title %}{{ recette.nom }}{% endblock %}

{% block body %}
    <section class="detail-recette">
        <h1>{{ recette.nom }}</h1>
        <div><a href="{{ path('otherProfile', {'pseudo': recette.Auteur.pseudo })}}">Auteur : {{ recette.Auteur.pseudo}}</a></div>
        <div>Note : {{ recette.note ? recette.note|number_format(2)  : 'Pas encore de Note'}}</div>
        <div>
            Ingredients :
            <ul>
                {% for ingredient in recette.ingredients %}
                    <li>{{ ingredient.quantite}} {{ ingredient.Ingredient.Unite }} de {{ ingredient.Ingredient.nom }} </li>
                {% endfor %}
            </ul>
        </div>
        <div>Portions : {{ recette.portions }}</div>
        <div>Instructions : {{ recette.instructions }}</div>
        <div>Temps de preparation : {{ recette.tempsPreparation | date("H:i") }}</div>
        <div>Temps de cuisson : {{ recette.tempsCuisson | date("H:i") }}</div>
        <div>Commentaires :
            <ul>
                {% for commentaire in recette.commentaires %}
                    <li>{{ commentaire.texte }}</li>
                {% endfor %}
            </ul>
        </div>
        <div>
            {% if existingRating is null and app.user != recette.Auteur%}
                <h2>Notez cette recette</h2>
                {{ form_start(ratingForm) }}
                {{ form_widget(ratingForm) }}
                <button type="submit">Notez</button>
                {{ form_end(ratingForm) }}
            {% endif %}
        </div>
    </section>
    {% if app.user == recette.Auteur %}
        <button><a href="{{ path('app_modifRecette', {'id': recette.Id}) }}"> Modifi√©e votre recette</a></button>
    {% endif %}
{% endblock %}


